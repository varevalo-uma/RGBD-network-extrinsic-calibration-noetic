<?xml version="1.0"?>
<!-- SESSION ID: 1715076698 -->
<launch>

  <arg name="enable_people_tracking" default="false" />
  <arg name="enable_pose" default="true" />
  <arg name="enable_object" default="true" />
  <arg name="sensor_id"   default="950122060788" />
  <arg name="sensor_name" default="realsense4" />

  <arg name="width" default="640" />
  <arg name="height" default="480" />

  <!-- true  = Munaro Based OPT Detection -->
  <!-- false = YOLO Based Detection (Must Have YOLO installed to use)-->
  <arg name="munaro_detection_enabled"         default="true" />

  <!-- Launch the sensor -->
   <include file="$(find realsense2_camera)/launch/rs_rgbd.launch">
      <arg name="camera"         value="$(arg sensor_name)" />
      <arg name="serial_no"         value="$(arg sensor_id)" />

      <arg name="depth_width"         value="$(arg width)" />
      <arg name="depth_height"         value="$(arg height)" />
      <arg name="infra_width"         value="$(arg width)" />
      <arg name="infra_height"         value="$(arg height)" />
      <arg name="color_width"         value="$(arg width)" />
      <arg name="color_height"         value="$(arg height)" />
   </include>
  <include file="$(find detection)/launch/realsense_frames.launch">
      <arg name="camera"         value="$(arg sensor_name)" />
   </include>
  <!-- Detection node -->
  <group if="$(arg enable_people_tracking)" >
      <group if="$(arg munaro_detection_enabled)">
          <include file="$(find detection)/launch/detector_realsense.launch">
            <arg name="sensor_id"               value="$(arg sensor_id)" />
            <arg name="rgb_camera_info_url"     value="file://$(find opt_calibration)/camera_info/rgb_$(arg sensor_id).yaml" />
              <arg name="sensor_name"             value="$(arg sensor_name)" />
              <arg name="ground_from_calibration" value="true" />
          </include>
      </group>
      <group unless="$(arg munaro_detection_enabled)" >
  	    <include file="$(find yolo_detector)/launch/detect_yolo_object_realsense_network.launch">
    	        <arg name="sensor_name"             value="$(arg sensor_name)" />
    	        <arg name="standalone"              value="false" />
  	    </include>
      </group>
  </group>

  <!-- Skeleton Detection node -->
  <group if="$(arg enable_pose)">
    <include file="$(find detection)/launch/skeleton_detector_realsense.launch">
      <arg name="sensor_name"             value="$(arg sensor_name)" />
      <arg name="ground_from_calibration" value="true" />
    </include>

  </group>

  <!-- Object Detection node -->
  <group if="$(arg enable_object)">
    <include file="$(find yolo_detector)/launch/detect_yolo_object_realsense_network.launch">
      <arg name="sensor_name"             value="$(arg sensor_name)" />
    </include>

  </group>

</launch>
